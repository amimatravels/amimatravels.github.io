<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Amima Travels - Enjoy Stress Free Holidays</title>

  <!-- Keep your existing meta, SEO, analytics, and CSS here... -->
  <link rel="stylesheet" href="styles.css">
  <script defer src="script.js"></script>
</head>
<body>
  <header>Amima Travels - Enjoy Stress Free Holidays</header>
  <nav>
    <a href="index.html">Home</a>
    <a href="booking.html">Flight Booking</a>
    <a href="carrental.html">Car Booking</a>
    <a href="hotelbooking.html">Hotel Booking</a>
    <a href="aboutus.html">About Us</a>
    <a href="contactus.html">Contact Us</a>
  </nav>

  <div class="hero" id="hero">Find Your Perfect Flight</div>
  <div class="content">
    <h2>Book Flights and Hotels at the Best Price</h2>
    <p>Explore amazing deals and travel worldwide with Amima Travels.</p>
    <a href="booking.html" class="cta-button">Start Booking</a>
  </div>

  <footer>
    <h2>Follow Us</h2>
    <a href="https://www.facebook.com/amimatravels/" target="_blank"><img src="icons8-facebook-48.png" alt="Facebook" style="width:42px;height:42px;"></a>
    <a href="https://x.com/AmimaTravels" target="_blank"><img src="icons8-x-48.png" alt="Twitter" style="width:40px;height:40px;"></a>
    <a href="https://www.instagram.com/amimatravels/" target="_blank"><img src="icons8-instagram-48.png" alt="Instagram" style="width:40px;height:40px;"></a>
    <a href="https://www.linkedin.com/company/amima-travels/?viewAsMember=true" target="_blank"><img src="icons8-linkedin-48.png" alt="LinkedIn" style="width:40px;height:40px;"></a>
    <a href="https://www.youtube.com/@amimatravels" target="_blank"><img src="icons8-youtube-48.png" alt="YouTube" style="width:42px;height:42px;"></a>
    <p>Contact: contact@amimatravels.com | Phone: +91 7384366415 | Address: Murshidabad, West Bengal, India</p>
  </footer>

  <!-- Background Slideshow Script -->
  <script>
    const hero = document.getElementById("hero");
    const images = [
      "airbus-8607152_1280.jpg",
      "airbus-4454338_1280.jpg",
      "boat-7602830_1280.jpg",
      "bora-bora-3023437_1280.jpg",
      "couple-7612157_1280.jpg",
      "emirates-867771_1280.jpg",
      "glacier-7187291_1280.jpg",
      "iceberg-6966784_1280.jpg",
      "polynesia-3021072_1280.jpg",
      "sea-7250881_1280.jpg"
    ];
    let index = 0;
    function changeBackground() {
      hero.style.backgroundImage = `url('${images[index]}')`;
      index = (index + 1) % images.length;
    }
    setInterval(changeBackground, 5000);
    changeBackground();
  </script>

  <!-- Auto Currency Detection with Cloudflare Worker -->
  <script>
    async function loadBookingWidgets(currency) {
      const widgetUrls = [
        "https://tp.media/content?trs=391513&shmarker=608703&locale=en&curr=CURRENCY&default_origin=Kolkata&powered_by=true&promo_id=4132&campaign_id=121",
        "https://tp.media/content?currency=CURRENCY&trs=391513&shmarker=608703&locale=en&powered_by=true&origin=LON&destination=BKK&promo_id=2811&campaign_id=100",
        "https://tp.media/content?currency=CURRENCY&trs=391513&shmarker=608703&locale=en&powered_by=true&one_way=false&period=year&promo_id=4041&campaign_id=100",
        "https://tp.media/content?currency=CURRENCY&trs=391513&shmarker=608703&locale=en&powered_by=true&round_trip=true&promo_id=4054&campaign_id=100"
      ];

      widgetUrls.forEach(url => {
        const script = document.createElement("script");
        script.async = true;
        script.src = url.replace(/CURRENCY/g, currency);
        script.charset = "utf-8";
        document.body.appendChild(script);
      });
    }

    // Call Cloudflare Worker instead of ipapi
    fetch("https://geo-link-switcher.amimatravels.workers.dev/")
      .then(res => res.json())
      .then(data => {
        const userCurrency = data.currency || "USD";
        loadBookingWidgets(userCurrency);
      })
      .catch(err => {
        console.error("Currency detection failed, fallback to USD", err);
        loadBookingWidgets("USD");
      });
  </script>
</body>
</html>
